#+title: Start

* initial scan

busca por DNS servers -->
#+begin_src sh
sudo nmap -sU -p 53 10.5.2.0/24
#+end_src

alguns resultados -->
#+begin_src sh
Nmap scan report for 10.5.2.99
Host is up, received echo-reply ttl 62 (0.15s latency).
Scanned at 2026-01-06 23:18:42 -03 for 0s

PORT   STATE SERVICE REASON
53/udp open  domain  udp-response ttl 62

Nmap scan report for 10.5.2.111
Host is up, received echo-reply ttl 62 (0.14s latency).
Scanned at 2026-01-06 23:18:42 -03 for 1s

PORT   STATE         SERVICE REASON
53/udp open|filtered domain  no-response
#+end_src

apÃ³s adicionar o 10.5.2.99 na primeira linha do */etc/resolv.conf* -->
#+begin_src sh
dig -x 10.5.2.99 @10.5.2.99

2.5.10.in-addr.arpa.    3600    IN      SOA     dc01.telecore.ad. hostmaster.telecore.ad. 6 900 600 86400 3600
#+end_src

*dig -x* --> shortcut for reverse lookups

com o nslookup para confirmar -->
#+begin_src sh
nslookup 10.5.2.2
2.2.5.10.in-addr.arpa   name = dc01.telecore.ad.
#+end_src

verificando todo o ip range -->
#+begin_src sh
for i in {1..254}; do dig +short -x 10.5.2.$i; done > /tmp/ptrs.txt
#+end_src

#+begin_src sh
dc01.telecore.ad. --> 10.5.2.2
PKI-Srv.telecore.ad. --> 10.5.2.8
Ex-Srv.telecore.ad. --> 10.5.2.16
SQL-Srv.telecore.ad. --> 10.5.2.22
ESXi-VD.telecore.ad. --> 10.5.2.111
#+end_src

outra maneira de verificara a reverse zone com o dig -->
#+begin_src sh
dig @10.5.2.99 2.5.10.in-addr.arpa AXFR

2.5.10.in-addr.arpa.    3600    IN      NS      dc01.telecore.ad.
111.2.5.10.in-addr.arpa. 3600   IN      PTR     ESXi-VD.telecore.ad.
16.2.5.10.in-addr.arpa. 3600    IN      PTR     Ex-Srv.telecore.ad.
2.2.5.10.in-addr.arpa.  3600    IN      PTR     dc01.telecore.ad.
22.2.5.10.in-addr.arpa. 3600    IN      PTR     SQL-Srv.telecore.ad.
8.2.5.10.in-addr.arpa.  3600    IN      PTR     PKI-Srv.telecore.ad.
2.5.10.in-addr.arpa.    3600    IN      SOA     dc01.telecore.ad. hostmaster.teleco
#+end_src

forward zone transfer -->
#+begin_src sh
dig @10.5.2.99 telecore.ad AXFR

_gc._tcp.telecore.ad.   600     IN      SRV     0 100 3268 dc01.telecore.ad.
_kerberos._tcp.telecore.ad. 600 IN      SRV     0 100 88 dc01.telecore.ad.
_kpasswd._tcp.telecore.ad. 600  IN      SRV     0 100 464 dc01.telecore.ad.
_ldap._tcp.telecore.ad. 600     IN      SRV     0 100 389 dc01.telecore.ad.
_kerberos._udp.telecore.ad. 600 IN      SRV     0 100 88 dc01.telecore.ad.
#+end_src
